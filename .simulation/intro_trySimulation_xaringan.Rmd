---
output: 
  xaringan::moon_reader:
    css: ["default","css/font.css","css/mytheme.css"]
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: "16:9"
    seal: false  
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = T, fig.width=8, fig.height=6, fig.retina = 3, warning = FALSE, message = FALSE)
library(tidyverse)
library(knitr)
library(kableExtra)
library(psych)
library(trySimulation)
library(glue)
library(xaringan)
library(flipbookr)
library(xaringanExtra)

xaringanExtra::use_tile_view()
xaringanExtra::use_panelset()

# https://arm.rbind.io/slides/xaringan.html#120

root <- rprojroot::find_rstudio_root_file()
report_path <- file.path(root, ".simulation")

load(file.path(report_path, "results.rdata"))
```

class: title-slide, center, middle


# Simulation Study with Package Development

`r Sys.Date()`

### Sooyong Lee | Educational Psychology | The University of Texas at Austin

---
class: contents

## Contents

- 시뮬레이션을 위한 패키지 만들기기
- git(hub)
- 시뮬레이션 분석
- 사용할 package
  - `tidyverse`
      * `dplyr`, `tidyr`, `ggplot2`, `purrr`, `magrittr`
  - `lavaan`

---

class: contents

## Package for Simulation

- 엄청 큰 장점은 없음
- 같이 배우면 좋을 거 같음
- 연구 보관이 용이함.
  - 언제든지 다시 하거나, 수정하기 쉬움
- 패키지 자체가 연구인 경우

---
class: contents

## Simulation

- 시뮬레이션에 필요한 거
  - 주제
  - 시뮬레이션 조건 함수
  - 데이터 생성 함수
  - 분석 함수
  - 정리 함수

---

## 주제

연속형 변수를 범주화 해서 분석하면 얼마나 위험할까?

```{r echo=FALSE, fig.align="center", out.height = "200%"}
include_graphics(file.path(report_path, "model_fig.png"))
```


---

## 시뮬레이션 조건 함수

```{r}
makeCondition <- function(n_sample, cov_size, n_indi, cut_size, 
                          n_rep, full = T) {
  
  con_list <-
    crossing(n_sample, cov_size, n_indi, cut_size) %>%
    mutate(condition_number = row_number())

  if(full)
    con_list <- 
      crossing(con_list, n_rep = 1:n_rep) %>% 
      arrange(n_rep, condition_number)

  return(con_list)
}

```

---

## 시뮬레이션 조건 함수

.panel[.panel-name[code]
```{r condition_list}
condition_list <- 
  makeCondition(
    n_sample = c(100, 500), 
    cov_size = c(0, 0.5), 
    n_indi = c(3, 6), 
    cut_size = c(3,5,7), 
    n_rep = 5, 
    full = F)
```
]

.panel[.panel-name[result]
```{r }
condition_list
```

]

---


